# 定时器的坑——重复执行
----  
近来热衷于写动画,粗心遇到了一个定时器造成的问题,这里举个栗子:  
```  
$("div").on("mouseenter",  () => {
    function anima() {
        end = setInterval(() => {
            $("div").css("width","+=20")
        }, 500)
    }
    anima()
})
```  
* 想要的效果就是鼠标移入时,元素开始每过500ms,宽度增加20个像素,实际测试时有一个明显的Bug,mouseenter事件触发的越多,元素宽度增加的速度越快,并没有没过500ms增加宽度。这里出现问题的主要原因就是再开始下一次动画之前没有进行定时器的清除。
  
## 解决办法   
```
$("div").on("click",  () => {
    clearInterval(end)
    function anima() {
        end = setInterval(() => {
            $("div").css("width","+=20")
        }, 1000)
    }
    anima()
})
```    
*  实际使用中代码比较多,不像这个例子问题比较明显,可能出现问题时暂时没有意识到出现bug的原因。个人感觉涉及到动画且用到了setTimeout或者setInterval函数,出现动画没有按照设定的时间间隔执行,反而越来越快的情况,基本都是由于重复设置了定时器引起的。